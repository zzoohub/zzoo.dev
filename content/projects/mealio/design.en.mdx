---
title: "Mealio — Engineering Design Doc"
---

## Architecture

**Mobile (React Native / Expo)**
- Expo Router for file-based navigation
- Zustand for client state, TanStack Query for server state
- MMKV for fast local persistence
- Bilingual (EN/KO) via i18next

**API (Rust / Axum)**
- SQLx with compile-time checked queries against Neon PostgreSQL
- JWT + JWKS authentication (Google & Apple OAuth)
- Presigned URL uploads to Cloudflare R2
- OpenAPI spec with Swagger UI

**Infrastructure (Pulumi)**
- GCP Cloud Run with autoscaling (0–3 instances)
- Neon managed PostgreSQL
- Cloudflare R2 for photo storage
- GCP Secret Manager for credentials
- GitHub Actions CI/CD for automated builds and deploys

## Tech Stack Deep Dive

| Layer | Technology | Why |
|-------|-----------|-----|
| Mobile | React Native + Expo 55 | Cross-platform with native performance, OTA updates via EAS |
| State | Zustand + TanStack Query | Clean separation of client vs. server state |
| API | Rust + Axum 0.8 | Type safety, low memory footprint, fast cold starts on Cloud Run |
| Database | PostgreSQL 18 (Neon) | Serverless Postgres with branching for dev/staging |
| Storage | Cloudflare R2 | S3-compatible, zero egress fees for photo storage |
| IaC | Pulumi (TypeScript) | Declarative infra management for GCP, Cloudflare, and Neon |
| Monitoring | Sentry + PostHog | Error tracking + product analytics |
